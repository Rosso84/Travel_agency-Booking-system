<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:sec="http://www.springframework.org/security/tags"
>

<ui:composition template="/layout.xhtml">

    <ui:define name="title">
        Trip Detail Page
    </ui:define>


    <ui:define name="content">

        <h2>About the trip</h2>

        <c:set var="trip" value="#{tripController.chosenTrip}"/>
        <p>Location:  #{trip.location}</p>
        <p>#{trip.title}</p>
        <p>#{trip.description}</p>
        <p>departure date: #{trip.departureDate}</p>
        <p>Return date: #{trip.returnDate}</p>
        <p>#{trip.cost}NOK</p>

        <sec:authenticated>
            <h:commandButton id="submit"
                             value="Purchase"
                             class="btn"
                             action="#{ purchaseController.bookTrip( userInfoController.userName, trip.id ) }"/>
        </sec:authenticated>

        <sec:anonymous>
            <h:outputText style="font-size: 16px; color: blueviolet" value="Login to book this trip. Not many available left! "/>
        </sec:anonymous>
    </ui:define>

</ui:composition>
</html>
